{"uid":"dq5VGx2nz","slug":"","title":"Cluster Locks","originalTitle":"","tags":[],"style":"dark","timezone":"","editable":true,"hideControls":false,"sharedCrosshair":false,"panels":[{"editable":false,"error":false,"gridPos":{"h":9,"w":12,"x":0,"y":0},"id":2,"isNew":false,"span":0,"title":"cluster locks held","description":"Measures how long a database cluster lock was held for. Used by Jira in a clustered environment.\n\nLock contention can lead to performance degradation. Contact the vendor responsible to flag and investigate the issue. It maybe normal to have a thread holding onto a lock for a long time, if there aren’t any threads waiting for the lock - see db.cluster.lock.waited.duration to find out if there are any threads waiting for the lock.","transparent":false,"type":"gauge","description":"Measures how long a database cluster lock was held for. Used by Jira in a clustered environment.\n\nLock contention can lead to performance degradation. Contact the vendor responsible to flag and investigate the issue. It maybe normal to have a thread holding onto a lock for a long time, if there aren’t any threads waiting for the lock - see db.cluster.lock.waited.duration to find out if there are any threads waiting for the lock.","id":2,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"targets":[{"exemplar":true,"expr":"sum without (instance,invokerPluginKey,implementation,lockName) (com_atlassian_jira_metrics_Value{category00=\"cluster\",category01=\"lock\",category02=\"held\",statistic=\"active\"})","interval":"","legendFormat":"","refId":"A"}],"title":"cluster locks held","transparent":false,"datasource":null,"type":"gauge","pluginVersion":"8.2.5","error":false,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"span":0,"editable":false,"isNew":false,"gridPos":{"h":9,"w":12,"x":0,"y":0}},{"editable":false,"error":false,"gridPos":{"h":9,"w":12,"x":12,"y":0},"id":5,"isNew":false,"span":0,"title":"active locks held (cluster wide)","description":"Measures how long a database cluster lock was held for. Used by Jira in a clustered environment.\n\nLock contention can lead to performance degradation. Contact the vendor responsible to flag and investigate the issue. It maybe normal to have a thread holding onto a lock for a long time, if there aren’t any threads waiting for the lock - see db.cluster.lock.waited.duration to find out if there are any threads waiting for the lock.","transparent":false,"type":"timeseries","targets":[{"refId":"A","expr":"topk(5, sum without(instance,implementation) (com_atlassian_jira_metrics_Value{category00=\"cluster\",category01=\"lock\",category02=\"held\",statistic=\"active\",invokerPluginKey!=\"undefined\"}))","legendFormat":"{{invokerPluginKey}} - {{lockName}} (lock name)"}],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"fieldConfig":{"defaults":{"unit":"","color":{"mode":"palette-classic"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"custom":{"axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":5,"gradientMode":"none","lineInterpolation":"linear","lineWidth":1,"pointSize":5,"showPoints":"auto","spanNulls":false,"hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineStyle":{"fill":""},"scaleDistribution":{"type":"linear"},"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}}}}},{"editable":false,"error":false,"gridPos":{"h":9,"w":12,"x":0,"y":9},"id":3,"isNew":false,"span":0,"title":"cluster locks held","description":"Measures how long a database cluster lock was waited for. Used by Jira in a clustered environment.\n\nIf there many threads waiting for the same lock, it can lead to performance degradation. Contact the vendor responsible to flag and investigate the issue.","transparent":false,"type":"gauge","pluginVersion":"8.2.5","transparent":false,"type":"gauge","error":false,"id":3,"span":0,"title":"cluster locks held","datasource":null,"editable":false,"gridPos":{"h":9,"w":12,"x":0,"y":9},"description":"Measures how long a database cluster lock was waited for. Used by Jira in a clustered environment.\n\nIf there many threads waiting for the same lock, it can lead to performance degradation. Contact the vendor responsible to flag and investigate the issue.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"isNew":false,"options":{"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"targets":[{"exemplar":true,"expr":"sum without (instance,invokerPluginKey,implementation,lockName) (com_atlassian_jira_metrics_Value{category00=\"cluster\",category01=\"lock\",category02=\"waited\",statistic=\"active\"})","interval":"","legendFormat":"","refId":"A"}]},{"editable":false,"error":false,"gridPos":{"h":9,"w":12,"x":12,"y":9},"id":6,"isNew":false,"span":0,"title":"active locks waiting (cluster wide)","description":"Measures how long a database cluster lock was waited for. Used by Jira in a clustered environment.\n\nIf there many threads waiting for the same lock, it can lead to performance degradation. Contact the vendor responsible to flag and investigate the issue.","transparent":false,"type":"timeseries","targets":[{"refId":"A","expr":"topk(5, sum without(instance,implementation) (com_atlassian_jira_metrics_Value{category00=\"cluster\",category01=\"lock\",category02=\"waited\",statistic=\"active\",invokerPluginKey!=\"undefined\"}))","legendFormat":"{{invokerPluginKey}} - {{lockName}} (lock name)"}],"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"fieldConfig":{"defaults":{"unit":"","color":{"mode":"palette-classic"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"custom":{"axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":5,"gradientMode":"none","lineInterpolation":"linear","lineWidth":1,"pointSize":5,"showPoints":"auto","spanNulls":false,"hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineStyle":{"fill":""},"scaleDistribution":{"type":"linear"},"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}}}}}],"rows":null,"templating":{"list":[]},"annotations":{"list":[{"name":"Annotations \u0026 Alerts","datasource":"-- Grafana --","showLine":false,"iconColor":"rgba(0, 211, 255, 1)","lineColor":"","iconSize":0,"enable":true,"query":"","expr":"","step":"","textField":"","textFormat":"","titleFormat":"","tagsField":"","tags":null,"tagKeys":"","type":"dashboard"}]},"schemaVersion":32,"version":13,"links":[],"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":null,"time_options":null}}